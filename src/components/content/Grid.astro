---
const { col=1, row=1, minWidth='300px', minCol=1 } = Astro.props;
---

<div class="md-block md-grid" style={{
    "--md-grid-col": col,
    "--md-grid-row": row,
    "--md-grid-min-width": minWidth,
    "--md-grid-min-col": minCol
}}>
    <slot></slot>
</div>

<style>
.md-grid {
    display: grid;
    --gap: 1rem;
    grid-template-columns: repeat(
        auto-fill, 
        minmax(
            min(
                max(
                    calc(100% / var(--md-grid-col) - var(--gap) * (var(--md-grid-col) - 1) / var(--md-grid-col)),
                    var(--md-grid-min-width)
                ),
                calc((100% - (var(--md-grid-min-col) - 1) * var(--gap)) / var(--md-grid-min-col))
            ),
            1fr
        )
    );
    grid-template-rows: repeat(var(--md-grid-row), 1fr);
    grid-gap: 1rem;
}
</style>